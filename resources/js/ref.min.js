document.addEventListener("DOMContentLoaded",(function(event){function sanitize(string){return string.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}for(var theRefs=document.querySelectorAll("ref"),i=0;i<theRefs.length;i++)if(theRefs[i].querySelector("date")){if(null!==theRefs[i].querySelector("date")){var reftarget,refdate,shortdate,str1='<a href="'+theRefs[i].getAttribute("target")+'" title="'+theRefs[i].querySelector("date").getAttribute("when")+'" target="_blank"><date>'+(shortdate=sanitize(theRefs[i].querySelector("date").textContent))+"</date></a>";theRefs[i].querySelector("date").innerHTML=str1}}else if(theRefs[i].previousElementSibling){if(null!==theRefs[i].previousElementSibling.nodeName&&"DATE"===theRefs[i].previousElementSibling.nodeName){var reftarget=theRefs[i].previousElementSibling.getAttribute("target"),refdate=theRefs[i].getAttribute("when"),shortdate=sanitize(theRefs[i].previousElementSibling.textContent);theRefs[i].innerHTML=theRefs[i].innerHTML.replace(new RegExp(shortdate,"gi"),"<date>$&</date>")}}else if(theRefs[i].nextElementSibling&&null!==theRefs[i].nextElementSibling.nodeName&&"REF"===theRefs[i].nextElementSibling.nodeName){var reftarget=theRefs[i].nextElementSibling.getAttribute("target"),refdate=theRefs[i].getAttribute("when"),shortdate=sanitize(theRefs[i].nextElementSibling.textContent);theRefs[i].innerHTML=theRefs[i].innerHTML.replace(new RegExp(shortdate,"gi"),"<date>$&</date>")}}));
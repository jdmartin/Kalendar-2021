document.addEventListener("DOMContentLoaded",(function(event){document.querySelector("#navmainpage").style.display="none";var navMenu=document.querySelector("#navmainpage");document.querySelector("#search-help").style.display="none";var searchToggle=document.querySelector("#search-toggle"),menuButton;searchToggle.addEventListener("click",searchHelpToggler),document.querySelector(".hiddenmenu").addEventListener("click",menuToggle);var helpButton=document.querySelector("button#help");helpButton.addEventListener("click",helpMenuToggler);var persButton=document.querySelector("button#pers");persButton.addEventListener("click",persButtonToggler);var addButton=document.querySelector("button#add");addButton.addEventListener("click",addButtonToggler);var placeButton=document.querySelector("button#places");placeButton.addEventListener("click",placeButtonToggler);var pencilButton=document.querySelector("button#pencils");pencilButton.addEventListener("click",pencilButtonToggler);var gapsButton=document.querySelector("button#gaps");gapsButton.addEventListener("click",gapsButtonToggler);var notesButton=document.querySelector("button#notes");notesButton.addEventListener("click",notesButtonToggler);const theGaps=document.querySelectorAll("gap");var currentPageName="",currentPageNameCount=0;function menuToggle(){let currentState=document.querySelector("#navmainpage").style.display;if(navMenu.style.display="none"===currentState?"block":"none",0===currentPageNameCount){let url=window.location.pathname,currentPosition=document.querySelector("#navmainpage").querySelector('a[href=".'+url+'"]');currentPageName=currentPosition.innerHTML,currentPosition.innerHTML="<span class='navarrow'>â†’ </span>"+currentPosition.innerHTML,currentPageNameCount=1}}function helpMenuToggler(){let theHelpBox=document.querySelector("div#helpbox"),theHelpBoxStyle=document.querySelector("div#helpbox").style.display;theHelpBox.style.display="block"!=theHelpBoxStyle?"block":"none",theHelpBox.classList.toggle("helpactive"),helpButton.classList.toggle("red")}function persButtonToggler(){persButton.classList.toggle("red");for(var persons=document.getElementsByTagName("persname"),i=0;i<persons.length;i++)persons[i].classList.toggle("active"),persons[i].parentElement.closest("td").classList.toggle("personHighlight")}function addButtonToggler(){addButton.classList.toggle("red");for(var adds=document.querySelectorAll('add:not([rend="pencil"])'),i=0;i<adds.length;i++)adds[i].classList.toggle("active"),adds[i].parentElement.closest("td").classList.toggle("addHighlight")}function placeButtonToggler(){placeButton.classList.toggle("red");for(var placeCount=document.getElementsByClassName("redHighlight").length,places=document.getElementsByTagName("add"),i=0;i<places.length;i++)places[i].classList.toggle("active"),places[i].parentElement.closest("td").classList.toggle("redHighlight")}function pencilButtonToggler(){pencilButton.classList.toggle("red");for(var pencils=document.querySelectorAll("add[rend='pencil']"),i=0;i<pencils.length;i++)pencils[i].classList.toggle("active"),pencils[i].parentElement.closest("td").classList.toggle("pencilHighlight")}function gapsButtonToggler(){gapsButton.classList.toggle("red");var gaps=document.querySelectorAll("gap");if(document.querySelectorAll('gap[class="hidden"]').length>0)mindTheGaps();else for(var i=0;i<gaps.length;i++)gaps[i].classList.toggle("hidden")}function notesButtonToggler(){notesButton.classList.toggle("red"),allNotes=document.querySelectorAll("note");for(var i=0;i<allNotes.length;i++)allNotes[i].classList.toggle("hidden"),allNotes[i].classList.toggle("active")}function searchHelpToggler(){let searchHelpStyle=document.querySelector("#search-help").style.display,searchHelp=document.querySelector("#search-help");"block"!=searchHelpStyle?(searchHelp.style.display="block",searchToggle.textContent="hide help"):(searchHelp.style.display="none",searchToggle.textContent="show help")}window.addEventListener("scroll",(function(){var header;document.querySelector("#search-menu").classList.toggle("sticky",window.scrollY>0)})),theLB=document.querySelectorAll("lb");for(var i=0;i<theLB.length;i++){let new_node=document.createElement("br");theLB[i].parentNode.insertBefore(new_node,theLB[i].nextSibling)}theUnclear=document.getElementsByTagName("unclear");for(var i=0;i<theUnclear.length;i++){let new_node=document.createElement("span");theUnclear[i].parentNode.insertBefore(new_node,theUnclear[i].nextSibling),theUnclear[i].textContent=" "+theUnclear[i].textContent}function mindTheGaps(){for(var i=0;i<theGaps.length;i++){var extent=theGaps[i].getAttribute("extent"),reason=theGaps[i].getAttribute("reason"),result="";null!=extent&&(result+="Extent: "+extent+" |"),null!=reason&&(result+=" Reason: "+reason+"  ");var str1,str2,link='<span style="border-bottom:1px dotted; "title="'.concat(result,'" ><span>[gap]</span> ');theGaps[i].classList.remove("hidden"),theGaps[i].innerHTML=link}}for(var people=document.querySelectorAll("persname"),i=0;i<people.length;i++){let title=people[i].getAttribute("ref");void 0!==people[i]&&(null!=title&&people[i].setAttribute("title",title),people[i].classList.add("person-title"))}for(var places=document.querySelectorAll("placename"),i=0;i<places.length;i++){let title=places[i].getAttribute("ref");void 0!==places[i]&&(null!=title&&places[i].setAttribute("title",title),places[i].classList.add("place-title"))}for(var thePlaceNotes=document.querySelectorAll('note:not([type="editorial"])'),i=0;i<thePlaceNotes.length;i++){let place=thePlaceNotes[i].getAttribute("place"),content=thePlaceNotes[i].textContent,result="";null!=place&&(result+="Location: "+place+" |"),null!=content&&(result+=" Content: "+content+"  ");let str1,str2,placeNote='<span style="border-bottom:1px dotted; "title="'.concat(result,'" ><span>[note]</span> ');thePlaceNotes[i].innerHTML=placeNote,thePlaceNotes[i].classList.add("hidden")}for(var theEdNotes=document.querySelectorAll('note[type="editorial"]'),i=0;i<theEdNotes.length;i++){let ednote=theEdNotes[i].textContent,result="";null!=ednote&&(result+="Note: "+ednote+" ");let str1,str2,theEdNote='<span style="border-bottom:1px dotted; "title="'.concat(result,'" ><span>[note]</span> ');theEdNotes[i].innerHTML=theEdNote,theEdNotes[i].classList.add("hidden")}mindTheGaps()}));